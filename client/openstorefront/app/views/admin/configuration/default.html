<div ng-controller="AdminConfigurationCtrl">
  <h3 style="padding-left:15px; padding-right:15px;">Global configuration</h3>
  <form class="form-horizontal" ng-submit="saveGlobalConf()" role="form">
    <div class="form-group form-group-sm col-sm-12" style="margin:0px;">
      <!-- <div class="col-sm-6 pull-right"  style="padding-left:0px; padding-right:0px; min-height: 50px;"> -->
      <div class="col-sm-4 pull-right"  style="padding-left:0px; padding-right:0px; min-height: 50px;">
        <!-- <div class="col-sm-offset-2" style="padding-left:0px; padding-right:0px;"> -->
        <div class="" style="padding-left:0px; padding-right:0px;">
          <button class="btn btn-default">Refresh&nbsp;All&nbsp;Jira&nbsp;<i class="fa fa-refresh"></i></button>
        </div>
      </div>
      <!-- <div class="form-group form-group-sm col-sm-6" style=" min-height: 50px;">
        <label style="padding-left:0px; padding-right:0px;" class="col-sm-4 control-label" for="userna,e">Username:&nbsp;</label>
        <div class="col-sm-8" style="padding: 0;">
          <input class="form-control" type="text" id="username" ng-model="username" placeholder="Storefront User Username">
        </div>
      </div> -->
      <div class="form-group form-group-sm col-sm-8" style="margin:0px;">
        <label style="padding-left:0px; padding-right:0px;" class="col-sm-3 control-label" for="glbRefreshRate">Global Refresh Rate:&nbsp;</label>
        <div class="col-sm-9" style="padding: 0;">
          <cron ng-model="global_cron" id="glbRefreshRate"></cron>
        </div>
      </div>
    </div>
    <!-- <div class="form-group form-group-sm col-sm-12" style="">
      <div class="form-group form-group-sm col-sm-6" style=" min-height: 50px;">
        <label style="padding-left:0px; padding-right:0px;" class="col-sm-4 control-label" for="password">Password:&nbsp;</label>
        <div class="col-sm-8" style="padding: 0;">
          <input class="form-control" type="text" id="password" ng-model="password" placeholder="Storefront User Password">
        </div>
      </div>
    </div> -->
    <div class="form-group form-group-sm col-sm-12" style="margin:0px; margin-top: 10px; ">
      <div class="">
        <button class="btn btn-primary" type="submit">Save&nbsp;<i class="fa fa-save"></i></button>
      </div>
    </div>
  </form>
  <div class="col-sm-12" style="padding:0px;">
    <hr>
    <h3 style="padding-left: 15px; padding-right: 15px;">Jira configuration</h3>
    <form class="form-horizontal" ng-submit="saveMappingConf()" role="form">
      <!-- Show the two cross reference tables -->
      <div style="display: inline-block; position:relative; width: 100%; min-height: 120px; padding-left: 15px; padding-right: 15px;">
        <loader trigger="JiraConfigLoad"></loader>
        <div ng-show="noProjects">
          There were no projects in your associated Jira connection.
        </div>
        <div ng-show="!noProjects">
          <div ng-show="projects.length" class="form-group form-group-sm col-sm-6" style="margin:0px; min-height: 50px;">
            <label style="padding-left:0px; padding-right:0px;" class="control-label" for="projectSelect">Select a Jira Project:&nbsp;</label>
            <div class="" style="padding: 0;">
              <select ng-model="jiraProject" class="form-control" style="min-width: 350px;" id="projectSelect" ng-options="option as option.description for option in projects"></select>
            </div>
          </div>
          <div ng-show="issueOptions.length" class="form-group form-group-sm col-sm-6" style="margin:0px; min-height: 50px;">
            <label style="padding-left:0px; padding-right:0px;" class="control-label" for="issueSelect">Select a Jira Project Issue Type:&nbsp;</label>
            <div class="" style="padding: 0;">
              <select ng-model="jiraIssue" class="form-control" style="min-width: 350px;" id="issueSelect" ng-options="option as option.name for option in issueOptions"></select>
            </div>
          </div>
          <div ng-show="jiraIssue" class="col-sm-12" style="padding:0px;">
            <h4 style="margin-top:20px;">Map an Attribute to the custom field in Jira</h4>
            <div ng-show="storeFields.length" class="form-group form-group-sm col-sm-6" style="margin:0px; min-height: 50px;">
              <label style="padding-left:0px; padding-right:0px;" class="control-label" for="storeFieldSelect">Select an Attribute Type:&nbsp;</label>
              <div class="" style="padding: 0;">
                <select ng-model="storeField" class="form-control" style="min-width: 350px;" id="storeFieldSelect" ng-options="option as option.description for option in storeFields"></select>
              </div>
            </div>
            <div ng-show="fields.length" class="form-group form-group-sm col-sm-6" style="margin:0px; min-height: 50px;">
              <label style="padding-left:0px; padding-right:0px;" class="control-label" for="fieldSelect">Select a Jira Project Issue Type:&nbsp;</label>
              <div class="" style="padding: 0;">
                <select ng-model="jiraField" class="form-control" style="min-width:350px;" id="fieldSelect" ng-options="option as option.name for option in fields"></select>
              </div>
            </div>
            <div ng-show="storeCodes.length && jiraField">

              <form name="foorm" novalidate ng-submit="onSubmit()">
                <select ng-model="masterSelect" ng-options="item.value for item in masterSelected" multiple></select>
                <div ng-repeat="code in storeCodes">
                  <button ng-click="moveLeft(code)">&#60;&#60;</button>
                  <button ng-click="moveRight(code)">&#62;&#62;</button>
                  <select ng-model="code.toRemove" ng-options="item.value for item in code.selected" multiple></select>
                </div>
              </form>
              {{masterSelected}}
              <br>
              <br>
              <br>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group form-group-sm col-sm-12" style="margin:0px; margin-top: 10px; padding-left: 15px; padding-right: 15px;">
        <div class="">
          <button class="btn btn-primary" type="submit">Save&nbsp;<i class="fa fa-save"></i></button>
        </div>
      </div>
    </form>
  </div>
  <div class="col-sm-12" style="">
    <hr>
    <h3>Component configuration</h3>
    <form class="form-horizontal" role="form">
      <div class="form-group form-group-sm col-sm-6" style="margin:0px; min-height: 50px;">
        <label for="componentConfType" style="padding-left:0px; padding-right:0px;" class="control-label" style="text-align:right;">Select an integration type:&nbsp;</label>
        <select id="componentConfType" class="form-control" style="min-width:350px;" name="type" id="type" ng-model="type" ng-options="thing.code as thing.label for thing in types"></select>
      </div>
      <div ng-show="!xRefTypes || xRefTypes.length === 0" class="form-group form-group-sm col-sm-12" style=" min-height: 50px;">
        <div class="warning"><i class="glyphicon glyphicon-warning-sign"></i>&nbsp;You need to add a mapping before you can link components to an issue number.</div>
      </div>
      <div ng-show="xRefTypes.length > 0">
        <div ng-show="type === 'jira'">
          <div class="form-group form-group-sm col-sm-6" style="margin:0px; min-height: 50px;">
            <label for="componentConfMap" style="padding-left:0px; padding-right:0px;" class="control-label" style="text-align:right;">Select a mapping:&nbsp;</label>
            <select id="componentConfMap" class="form-control" style="min-width:350px;" ng-model="selectedMapping" ng-options="type as type.mappingName for type in xRefTypes"></select>
          </div>
          <div class="form-group form-group-sm col-sm-12" style="margin:0px;">
            <table ng-show="configurations" class="table table-striped table-bordered">
              <tr>
                <th>Component</th>
                <th>Issue Number</th>
                <th>Status</th>
                <th>Refresh/Edit/Delete/</th>
              </tr>
              <tr ng-repeat="config in configurations" ng-class="config.status === 'error'? 'danger': ''">
                <td>{{config.componentName}}</td>
                <td>{{config.issueNumber}}</td>
                <td>{{config.status}}</td>
                <td style="padding:0px;">&nbsp;<button class="btn btn-default" ng-click="forceRefresh(config)">Refresh&nbsp;<i class="fa fa-refresh"></i></button>&nbsp;<button class="btn btn-default" ng-click="setupModal(config); openModal('compConf');">Edit&nbsp;<i class="fa fa-edit"></i></button>&nbsp;<button class="btn btn-danger" ng-click="deleteConfig(config)">Delete&nbsp;<i class="fa fa-trash-o"></i></button></td>
              </tr>
            </table>
          </div>
          <div class="col-sm-12" style="padding: 0; min-height: 50px;">
            <button class="btn btn-default" ng-click="sendToModal(selectedMapping)">Add New Configuration&nbsp;</button>
          </div>
        </div>
      </div>
    </form>
  </div>
  <!-- This is the results description modal (the contents are handled in this controller) -->
  <div modal controller-name="BaseCtrl" modalId='compConf' modal-classes="classlist">
  </div>
</div>
