<!DOCTYPE html>
<!--
Copyright 2015 Space Dynamics Laboratory - Utah State University Research Foundation.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<style>
	.required:after {
		 content:" *"; 
		 color:red;
	}
	.formPanel{
		border: 1px lightgray solid;
		padding: 10px;
	}
	.formPanel-header{
		padding: 5px;		
		height: 25px;
		font-size: 16px;
		font-weight: bold;		
	}
</style>

<h2>&nbsp;&nbsp;<i class="fa fa-edit"></i>{{editModeText}}<span style="float: right; font-size: 18px;"><i class="fa fa-close" ng-click="close();"></i>&nbsp;&nbsp;</span></h2>
<hr>
<div  id="componentWindowDiv"  style="padding-left: 20px; padding-right: 20px;">
	<loader trigger="generalFormLoader"></loader>
	<tabset type="pills">
		<tab heading="General">			
			<hr>
			General and required information on a component.<br><br>
			<div class="alert-warning" style="color: black; font-size: 18px; text-align: center;" ng-show="flags.showIntegrationBanner">
				Data is being partially managed by an Integration. {{integrationText}}
			</div>
			<label class=" control-label">Last Activity Date: </label>&nbsp;{{componentForm.lastActivityDts | date:'MM/dd/yyyy h:mm:ss a'}}<br><br>
			<form class="form-horizontal" name='componentUIForm' role="form"  ng-submit="saveComponent()" style="padding-left: 10px; padding-right: 10px;">
				<div class="form-group"  >
					<label class=" control-label required">Name</label>				
						<input  type="text" 								
								name="name"													
								class="form-control" 
								ng-model="componentForm.name" 
								ng-minlength=1
								ng-maxlength=250 
								required 
								ng-focus />
						<p ng-show="componentUIForm.name.$error.minlength && !componentUIForm.name.$focused" class="help-block">Name must be longer than 1 character in length.</p>
						<p ng-show="componentUIForm.name.$error.required && !componentUIForm.name.$focused" class="help-block">Name is required.</p>

				</div>			
				<div class="form-group" show-errors >
					<label class="control-label required">Description</label>
					<textarea ckeditor="editorOptions" style="height: 100px;" ng-model="componentForm.description" ng-watch="editorContentWatch"></textarea>				
				</div>
				<div class="form-group" show-errors >
					<label class="control-label">Parent Component</label><br>
					<select type="text" class="form-control" style="width:auto" ng-model="componentForm.parentComponentId" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="comp.code as comp.description for comp in parentComponents" placeholder="Select Component"></select>
				</div>	
				<div class="form-group"  >
					<label class=" control-label " title="External Id">GUID</label>				
						<input  type="text" 								
								name="guid"													
								class="form-control" 
								ng-model="componentForm.guid" 
								ng-minlength=1
								ng-maxlength=40								
								ng-focus />
				</div>	
				<div class="form-group"  >
					<label class=" control-label required">Organization</label>				
						<input  type="text" 								
								name="organization"													
								class="form-control" 
								ng-model="componentForm.organization" 
								ng-minlength=1
								ng-maxlength=120
								required 
								ng-focus />
						<p ng-show="componentUIForm.organization.$error.minlength && !componentUIForm.organization.$focused" class="help-block">Organization must be longer than 1 character in length.</p>
						<p ng-show="componentUIForm.organization.$error.required && !componentUIForm.organization.$focused" class="help-block">Organization is required.</p>

				</div>	
				<div class="form-group"  >
					<label class=" control-label">Release Date</label>	<br>	
					<input type="text"  class="form-control" style="width: 325px; display:inline-block;" data-date-format="MM/dd/yyyy" data-start-view="0" data-min-view="0" autoclose="true" ng-model="componentForm.releaseDate"  placeholder="Date" data-date-type="number" bs-datepicker> 				
				</div>	
				<div class="form-group"  >
					<label class=" control-label">Version</label>				
						<input  type="text" 								
								name="version"													
								class="form-control" 
								ng-model="componentForm.version" 
								ng-minlength=0
								ng-maxlength=255								
								ng-focus />
				</div>	
				<div class="form-group" show-errors >
					<label class="control-label required">Approval State</label><br>						
					<select type="text" class="form-control" name="approvalStatus" required  ng-change="loadComponentAttributesView()" style="width:125px;display: inline" ng-model="componentForm.approvalState" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in approvalStatuses"></select>					
					{{componentForm.approvedDts | date:'MM/dd/yyyy h:mm a'}}&nbsp; {{componentForm.approvedUser}}
					<p ng-show="componentUIForm.approvalStatus.$error.required && !componentUIForm.approvalStatus.$focused" class="help-block">Approval State is required.</p>
				</div>				
				<hr>
				<h3>Required Attributes</h3>
				<table class="table table-striped table-bordered">
					<tr>
						<th>Attribute Type</th>
						<th>Attribute Code</th>					
					</tr>
					<tr ng-repeat="attrib in requiredAttributes | orderBy:'description'" >
						<td>{{attrib.description}}</td>
						<td><select type="text" class="form-control" style="width:auto" ng-model="generalForm.requiredAttribute[attrib.type]" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.label for code in getCodesForType(attrib.type)" placeholder="Select Code"></select></td>					
					</tr>					
				</table>			
				<hr>			
				<button type="submit" class="btn btn-primary" ng-disabled="componentUIForm.$invalid" ><i class="fa fa-save"></i>&nbsp;Save</button>	
			</form>				
		</tab>
		<tab heading="Attributes" ng-show="editMode">
			<hr>
			Attributes are filterable metadata about the component.<br><br>
			<div>
				<loader trigger="attributeFormLoader"></loader>
				<div class="btn-warning formPanel-header" ng-click="attributeForm.collapse = !attributeForm.collapse;">
					Add Attribute
					<span style="position: absolute; right: 0px; padding-right: 35px;">
						<i class="fa" ng-class="attributeForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
					</span>
				</div>
				<div class="formPanel" collapse="attributeForm.collapse">
					<form class="form-horizontal" name='attributeUIForm' role="form"  ng-submit="saveAttribute()" style="padding-left: 10px; padding-right: 10px;">
						<div class="form-group" show-errors >
							<label class="control-label">Attribute Type</label><br>
							<select type="text" class="form-control" name="attributeType" required style="width:500px;" ng-model="attributeForm.type" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="attribute.type as attribute.description for attribute in allAttributes" placeholder="Select Type"></select>
							<p ng-show="attributeUIForm.attributeType.$error.required && !attributeUIForm.attributeType.$focused" class="help-block">Attribute Type is required.</p>
						</div>	
						<div class="form-group" show-errors >
							<label class="control-label">Attribute Code</label><br>
							<select type="text" class="form-control"  name="attributeCode"  required style="width:500px;" ng-model="attributeForm.code" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.label for code in getCodesForType(attributeForm.type)" placeholder="Select Code"></select>
							<p ng-show="attributeUIForm.attributeCode.$error.required && !attributeUIForm.attributeCode.$focused" class="help-block">Attribute Code is required.</p>							
						</div>	
						<button type="submit" class="btn btn-primary" ng-disabled="attributeUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{attributeForm.saveText}}</button>
						<a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('attributeForm')" ng-show="attributeForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>	
					</form>
				</div>					
			</div>
			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadComponentAttributesView()" style="width:110px;display: inline" ng-model="componentAttributeViewQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
				<button class="btn btn-default" ng-click="loadComponentAttributesView()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('typeDescription', 'attribute');">Attribute Type <span ng-show="predicate['attribute'] === 'typeDescription'"><i ng-show="!reverse['attribute']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['attribute']" class="fa fa-sort-alpha-desc"></i></span></a></th>
					<th>Attribute Code</th>					
					<th>Orphan</th>									
					<th>Action</th>
				</tr>
				<tr ng-repeat="attribute in componentAttributesView | orderBy:predicate['attribute']:reverse['attribute']" >
					<td>{{attribute.typeDescription}}</td>
					<td>{{attribute.codeDescription}}</td>					
					<td>{{attribute.orphan}}</td>																
					<td style="padding:0px; width: 200px;">&nbsp;						
						<button class="btn" ng-click="toggleAttributeStatus(attribute);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>						
					</td>
				</tr>					
			</table>
		</tab>		
		<tab heading="Contacts" ng-show="editMode">
			<hr>
			Point of contacts for component.<br><br>
			<div id="contactManagementDivId">
				<loader trigger="contactFormLoader"></loader>
				<div class="btn-warning formPanel-header" ng-click="contactForm.collapse = !contactForm.collapse;">
					Add/Edit Contact
					<span style="position: absolute; right: 0px; padding-right: 35px;">
						<i class="fa" ng-class="contactForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
					</span>
				</div>
				
				<div class="formPanel" collapse="contactForm.collapse">
					<form class="form-horizontal" name='contactUIForm' role="form"  ng-submit="saveContact()" style="padding-left: 10px; padding-right: 10px;">
						<input type="hidden" ng-model="contactForm.contactId" name="contactId" />
						<div class="form-group" show-errors >
							<label class="control-label required">Contact Type</label><br>						  
							<select type="text" name="contactType" class="form-control" required  style="width:500px;" ng-model="contactForm.contactType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.description for code in contactTypes" placeholder="Select Type"></select>
							<p ng-show="contactUIForm.contactType.$error.required && !contactUIForm.contactType.$focused" class="help-block">Contact Type is required.</p>
						</div>								
						<div class="form-group"  >
							<label class=" control-label required">First Name</label>				
								<input  type="text" 									
										name="firstName"													
										class="form-control" 
										ng-model="contactForm.firstName" 
										ng-minlength=1
										ng-maxlength=200
										required 
										ng-focus />
								<p ng-show="contactUIForm.firstName.$error.minlength && !contactUIForm.firstName.$focused" class="help-block">First Name must be longer than 1 character in length.</p>
								<p ng-show="contactUIForm.firstName.$error.required && !contactUIForm.firstName.$focused" class="help-block">First Name is required.</p>

						</div>	
						<div class="form-group"  >
							<label class=" control-label required">Last Name</label>				
								<input  type="text" 										
										name="lastName"													
										class="form-control" 
										ng-model="contactForm.lastName" 
										ng-minlength=1
										ng-maxlength=200
										required 
										ng-focus />
								<p ng-show="contactUIForm.lastName.$error.minlength && !contactUIForm.lastName.$focused" class="help-block">Last Name must be longer than 1 character in length.</p>
								<p ng-show="contactUIForm.lastName.$error.required && !contactUIForm.lastName.$focused" class="help-block">Last Name is required.</p>

						</div>	
						<div class="form-group"  >
							<label class=" control-label required">Organization</label>				
								<input  type="text" 									
										name="organization"													
										class="form-control" 
										ng-model="contactForm.organization" 
										ng-minlength=1
										ng-maxlength=200
										required 
										ng-focus />
								<p ng-show="contactUIForm.organization.$error.minlength && !contactUIForm.organization.$focused" class="help-block">Organization must be longer than 1 character in length.</p>
								<p ng-show="contactUIForm.organization.$error.required && !contactUIForm.organization.$focused" class="help-block">Organization is required.</p>
						</div>				
						<div class="form-group"  >
							<label class=" control-label">Email</label>				
							<input  type="text" 						
									ng-pattern="EMAIL_REGEXP"									
									name="email"									
									class="form-control" 
									ng-model="contactForm.email" 									 
									ng-maxlength=200 
									maxlength=200 									
									ng-focus />	

						</div>	
						<div class="form-group"  >
							<label class=" control-label">Phone</label>				
							<input  type="tel" 								
								name="phone"													
								class="form-control" 
								ng-model="contactForm.phone" 
								ng-maxlength=200									
								placeholder="xxx-xxx-xxxx"							
								ng-focus />
						</div>	
						<button type="submit" class="btn btn-primary" ng-disabled="contactUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{contactForm.saveText}}</button>	
						<a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('contactForm')" ng-show="contactForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
					</form>
				</div>	
			</div>	

			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadContacts()" style="width:110px;display: inline" ng-model="contactQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
				<button class="btn btn-default" ng-click="loadContacts()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('positionDescription', 'contacts');">Contact Type <span ng-show="predicate['contacts'] === 'positionDescription'"><i ng-show="!reverse['contacts']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['contacts']" class="fa fa-sort-alpha-desc"></i></span></a></th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Email</th>									
					<th>Phone</th>									
					<th>Organization</th>									
					<th>Action</th>
				</tr>
				<tr ng-repeat="contact in contacts | orderBy:predicate['contacts']:reverse['contacts']" >
					<td>{{contact.positionDescription}}</td>
					<td>{{contact.firstName}}</td>
					<td>{{contact.lastName}}</td>
					<td>{{contact.email}}</td>
					<td>{{contact.phone}}</td>
					<td>{{contact.organization}}</td>																			
					<td style="padding:0px; width: 200px;">&nbsp;
						<button class="btn" ng-click="editEntity('contactForm', contact);"  title="Edit"><i class="fa fa-edit"></i></button>
						<button class="btn" ng-click="toggleContactStatus(contact);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>						
					</td>
				</tr>					
			</table>			
		</tab>
		<tab heading="Resources" ng-show="editMode">
			<hr>
			Location of component artifacts<br><br>
			<div>
				<loader trigger="resourceFormLoader"></loader>
				<div class="btn-warning formPanel-header" ng-click="resourceForm.collapse = !resourceForm.collapse;">
					Add/Edit Resource
					<span style="position: absolute; right: 0px; padding-right: 35px;">
						<i class="fa" ng-class="resourceForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
					</span>
				</div>
				<div class="formPanel" collapse="resourceForm.collapse">
					<form class="form-horizontal" name='resourceUIForm' role="form"  ng-submit="saveResource()" style="padding-left: 10px; padding-right: 10px;">
						<div class="form-group" show-errors >
							<label class="control-label required">Resource Type</label><br>
							<select type="text" class="form-control" name="resourceType" required style="width:500px;" ng-model="resourceForm.resourceType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.description for code in resourceTypes" placeholder="Select Type"></select>
							<p ng-show="resourceUIForm.resourceType.$error.required && !resourceUIForm.resourceType.$focused" class="help-block">Resource Type is required.</p>							
						</div>	
						<div class="form-group"  >
							<label class=" control-label ">Description</label>				
							<input  type="text" 								
									name="description"													
									class="form-control" 
									ng-model="resourceForm.description" 									
									ng-maxlength=250									
									ng-focus />
						</div>	
						<div class="form-group"  >
							<input type="checkbox" name="restricted" ng-model="resourceForm.restricted" class="" />&nbsp;<label class=" control-label">Restricted</label>				
						</div>							
						<div class="form-group"  >
							<label class=" control-label">Link</label>				
							<input  type="text" 									
									name="link"													
									class="form-control" 
									ng-model="resourceForm.originalLink" 									
									ng-maxlength=250									
									placeholder="http:///www.example.com/resource"
									ng-focus />
						</div>	
						<div class="form-group"  >
							<label class=" control-label">Upload Local Resource</label>		
							<input type="file" nv-file-select uploader="resourceUploader" name="uploadFile" width="100" ng-disabled="resourceForm.originalLink" />
							<p class="help-block" ng-show="resourceForm.localResourceName">Current Local Resource: {{resourceForm.originalFileName}} ({{resourceForm.localResourceName}})</p>								
						</div>	
						<br>
						<button type="submit" class="btn btn-primary" ng-disabled="resourceUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{resourceForm.saveText}}</button>	
						<a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelResourceEdit()" ng-show="resourceForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>	
					</form>				
				</div>					
			</div>			
			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadResources()" style="width:110px;display: inline" ng-model="resourceQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
				<button class="btn btn-default" ng-click="loadResources()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('key', 'resources');">Resource Type <span ng-show="predicate['resources'] === 'key'"><i ng-show="!reverse['resources']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['resources']" class="fa fa-sort-alpha-desc"></i></span></a></th>				
					<th>Description</th>
					<th>Link</th>									
					<th>Mime Type</th>									
					<th>Local Resource Name</th>
					<th>Restricted</th>									
					<th>Action</th>
				</tr>
				<tr ng-repeat="resource in resources | orderBy:predicate['resources']:reverse['resources']" >
					<td>{{resource.resourceTypeDesc}}</td>
					<td>{{resource.description}}</td>
					<td>{{resource.originalLink}}</td>
					<td>{{resource.mimeType}}</td>
					<td><p ng-show="resource.localResourceName">{{resource.originalFileName}} ({{resource.localResourceName}})</p></td>
					<td>{{resource.restricted}}</td>
					<td style="padding:0px; width: 200px;">&nbsp;
						<button class="btn" ng-click="editEntity('resourceForm', resource);"  title="Edit"><i class="fa fa-edit"></i></button>
						<button class="btn" ng-click="toggleResourceStatus(resource);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>	
						<button class="btn btn-danger" ng-click="deleteResource(resource);"  title="Delete"><i class="fa fa-trash"></i></button>
					</td>
				</tr>					
			</table>				
		</tab>		
		<tab heading="Media" ng-show="editMode">
			<hr>
			Screenshots, video, other media for a component.<br><br>
			<loader trigger="mediaFormLoader"></loader>
			<div class="btn-warning formPanel-header" ng-click="mediaForm.collapse = !mediaForm.collapse;">
				Add/Edit Media
				<span style="position: absolute; right: 0px; padding-right: 35px;">
					<i class="fa" ng-class="mediaForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
				</span>
			</div>
			<div class="formPanel" collapse="mediaForm.collapse">
				<form class="form-horizontal" name='mediaUIForm' role="form"  ng-submit="saveMedia()" style="padding-left: 10px; padding-right: 10px;">
					<div class="form-group" show-errors >
						<label class="control-label required">Media Type</label><br>
						<select type="text" class="form-control" name="mediaTypeCode" required style="width:500px;" ng-model="mediaForm.mediaTypeCode" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.description for code in mediaTypes" placeholder="Select Type"></select>
						<p ng-show="mediaUIForm.mediaTypeCode.$error.required && !mediaUIForm.mediaTypeCode.$focused" class="help-block">Media Type is required.</p>							
					</div>	
					<div class="form-group"  >
						<label class=" control-label">Caption</label>				
						<input  type="text" 								
								name="caption"													
								class="form-control" 
								ng-model="mediaForm.caption" 
								ng-minlength=0
								ng-maxlength=250								
								ng-focus />
					</div>	
					<div class="form-group"  >
						<label class=" control-label">Upload Media</label>		
						<input type="file" nv-file-select uploader="mediaUploader" name="uploadFile" width="100" ng-disabled="mediaForm.originalLink" />
						<p class="help-block" ng-show="mediaForm.fileName">Current Local Media: {{mediaForm.originalFileName}} ({{mediaForm.fileName}})</p>								
					</div>				
					<div class="form-group"  >
						<label class=" control-label">Link</label>				
						<input  type="text" 								
								name="originalLink"													
								class="form-control" 
								placeholder="http:///www.example.com/image.png"
								ng-model="mediaForm.originalLink"								
								ng-minlength=0
								ng-maxlength=250								
								ng-focus />
					</div>	
					<button type="submit" class="btn btn-primary" ng-disabled="mediaUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{mediaForm.saveText}}</button>	
					<a  ng-href=""  name="cancelSave" ng-click="cancelMediaEdit()" ng-show="mediaForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>	
				</form>			
			</div>
			<div>	
				<br>
				Filter Status:				
				<select type="text" class="form-control"  ng-change="loadMedia()" style="width:110px;display: inline" ng-model="mediaQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>				
				<button class="btn btn-default" ng-click="loadMedia()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('key', 'media');">Media Type <span ng-show="predicate['media'] === 'key'"><i ng-show="!reverse['media']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['media']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
					<th>Caption</th>														
					<th>Mime Type</th>									
					<th>Local Media Name</th>
					<th>Link</th>					
					<th>Action</th>
				</tr>
				<tr ng-repeat="mediaItem in media | orderBy:predicate['media']:reverse['media']" >
					<td>{{mediaItem.contentType}}</td>
					<td>{{mediaItem.caption}}</td>
					<td>{{mediaItem.mimeType}}</td>
					<td><p ng-show="mediaItem.fileName">{{mediaItem.originalFileName}} ({{mediaItem.fileName}})</p></td>	
					<td>{{mediaItem.originalLink}}</td>	
					<td style="padding:0px; width: 200px;">&nbsp;
						<button class="btn" ng-click="editEntity('mediaForm', mediaItem);"  title="Edit"><i class="fa fa-edit"></i></button>
						<button class="btn" ng-click="toggleMediaStatus(mediaItem);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
						<button class="btn btn-danger" ng-click="deleteMedia(mediaItem);"  title="Delete"><i class="fa fa-trash"></i></button>
					</td>
				</tr>					
			</table>
		</tab>		
		<tab heading="Dependencies" ng-show="editMode">
			<hr>
			External dependences for a component<br><br>
			<loader trigger="dependencyFormLoader"></loader>
			<div class="btn-warning formPanel-header" ng-click="dependencyForm.collapse = !dependencyForm.collapse;">
				Add/Edit Dependency
				<span style="position: absolute; right: 0px; padding-right: 35px;">
					<i class="fa" ng-class="dependencyForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
				</span>
			</div>
			<div class="formPanel" collapse="dependencyForm.collapse">
				<form class="form-horizontal" name='dependancyUIForm' role="form"  ng-submit="saveDependancy()" style="padding-left: 10px; padding-right: 10px;">
					<div class="form-group"  >
						<label class=" control-labe required">Name</label>				
						<input  type="text" 
								name="name"													
								class="form-control" 
								ng-model="dependencyForm.dependencyName" 
								ng-minlength=1
								ng-maxlength=250
								required 
								ng-focus />
						<p ng-show="dependancyUIForm.name.$error.minlength && !dependancyUIForm.name.$focused" class="help-block">Name must be longer than 1 character in length.</p>
						<p ng-show="dependancyUIForm.name.$error.required && !dependancyUIForm.name.$focused" class="help-block">Name is required.</p>
					</div>	
					<div class="form-group"  >
						<label class=" control-label required">Version</label>				
						<input  type="text" 						
								name="version"													
								class="form-control" 
								ng-model="dependencyForm.version" 
								ng-minlength=1
								ng-maxlength=250
								required 
								ng-focus />
						<p ng-show="dependancyUIForm.version.$error.minlength && !dependancyUIForm.version.$focused" class="help-block">Version must be longer than 1 character in length.</p>
						<p ng-show="dependancyUIForm.version.$error.required && !dependancyUIForm.version.$focused" class="help-block">Version is required.</p>
					</div>	
					<div class="form-group"  >
						<label class=" control-label">External Link</label>				
						<input  type="text" 						
								name="dependancyReferenceLink"													
								class="form-control" 
								placeholder="http://www.example.com"
								ng-model="dependencyForm.dependancyReferenceLink" 
								ng-minlength=0
								ng-maxlength=250						
								ng-focus />
					</div>				
					<div class="form-group"  >
						<label class=" control-label">Comment</label>				
						<input  type="text" 						
								name="comment"													
								class="form-control" 
								ng-model="dependencyForm.comment" 
								ng-minlength=0
								ng-maxlength=250					
								ng-focus />
					</div>	
					<button type="submit" class="btn btn-primary" ng-disabled="dependancyUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{dependencyForm.saveText}}</button>	
					<a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('dependencyForm')" ng-show="dependencyForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
				</form>			
			</div>						
			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadDependancies()" style="width:110px;display: inline" ng-model="dependencyFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>				
				<button class="btn btn-default" ng-click="loadDependancies()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('dependencyName', 'depend');">Name <span ng-show="predicate['depend'] === 'dependencyName'"><i ng-show="!reverse['depend']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['depend']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
					<th>Version</th>	
					<th>Link</th>
					<th>Comment</th>																							
					<th>Action</th>
				</tr>
				<tr ng-repeat="depend in dependencies | orderBy:predicate['depend']:reverse['depend']" >
					<td>{{depend.dependencyName}}</td>
					<td>{{depend.version}}</td>
					<td>{{depend.dependancyReferenceLink}}</td>
					<td>{{depend.comment}}</td>														
					<td style="padding:0px; width: 200px;">&nbsp;
						<button class="btn" ng-click="editEntity('dependencyForm', depend);"  title="Edit"><i class="fa fa-edit"></i></button>
						<button class="btn" ng-click="toggleDependancyStatus(depend);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>						
					</td>
				</tr>					
			</table>			
		</tab>
		<tab heading="Metadata" ng-show="editMode">
			<hr>
			Extra non-filterable information about a component.<br><br>
			<loader trigger="metadataFormLoader"></loader>
			<div class="btn-warning formPanel-header" ng-click="metadataForm.collapse = !metadataForm.collapse;">
				Add/Edit Metadata
				<span style="position: absolute; right: 0px; padding-right: 35px;">
					<i class="fa" ng-class="metadataForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
				</span>
			</div>
			<div class="formPanel" collapse="metadataForm.collapse">
				<form class="form-horizontal" name='metadataUIForm' role="form"  ng-submit="saveMetadata()" style="padding-left: 10px; padding-right: 10px;">
					<div class="form-group"  >
						<label class=" control-label required">Label</label>				
						<input  type="text" 								
								name="label"													
								class="form-control" 
								ng-model="metadataForm.label" 
								ng-minlength=1
								ng-maxlength=250
								required 
								ng-focus />
						<p ng-show="metadataUIForm.label.$error.minlength && !metadataUIForm.label.$focused" class="help-block">Label must be longer than 1 character in length.</p>
						<p ng-show="metadataUIForm.label.$error.required && !metadataUIForm.label.$focused" class="help-block">Label is required.</p>
					</div>	
					<div class="form-group"  >
						<label class=" control-labe required">Value</label>				
						<input  type="text" 								
								name="value"													
								class="form-control" 
								ng-model="metadataForm.value" 
								ng-minlength=1
								ng-maxlength=250
								required 
								ng-focus />
						<p ng-show="metadataUIForm.value.$error.minlength && !metadataUIForm.value.$focused" class="help-block">Value must be longer than 1 character in length.</p>
						<p ng-show="metadataUIForm.value.$error.required && !metadataUIForm.value.$focused" class="help-block">Value is required.</p>
					</div>				
					<button type="submit" class="btn btn-primary" ng-disabled="metadataUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{metadataForm.saveText}}</button>	
					<a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('metadataForm')" ng-show="metadataForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
		
				</form>	
			</div>	
			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadMetadata()" style="width:110px;display: inline" ng-model="metadataFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>			
				<button class="btn btn-default" ng-click="loadMetadata()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>				
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('Label', 'meta');">Label<span ng-show="predicate['meta'] === 'key'"><i ng-show="!reverse['meta']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['meta']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
					<th>Value</th>																					
					<th>Action</th>
				</tr>
				<tr ng-repeat="meta in metadata | orderBy:predicate['meta']:reverse['meta']" >
					<td>{{meta.label}}</td>
					<td>{{meta.value}}</td>					
					<td style="padding:0px; width: 200px;">&nbsp;						
					<button class="btn" ng-click="editEntity('metadataForm', meta);"  title="Edit"><i class="fa fa-edit"></i></button>
						<button class="btn" ng-click="toggleMetadataStatus(meta);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>							
					</td>
				</tr>					
			</table>				
		</tab>		
		<tab heading="Evaluation Information" ng-show="editMode">
			<hr>
			Evaluation scoring information<br><br>
			<loader trigger="evaluationLoader"></loader>
			<button type="submit" class="btn btn-danger" ng-click="clearAllEvaluationSections()"><i class="fa fa-trash"></i>&nbsp;Clear All Sections</button>
			<div ng-show="evaluationForm.oldSections">
				<h3>Old Evaluation Sections</h3>
				<table class="table table-striped table-bordered">
					<tr>
						<th><a href="" ng-click="setPredicate('key', 'oldeval');">Section Name <span ng-show="predicate['oldeval'] === 'key'"><i ng-show="!reverse['oldeval']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['oldeval']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
						<th>Score</th>																					
						<th>Action</th>
					</tr>
					<tr ng-repeat="section in oldSections | orderBy:predicate['oldeval']:reverse['oldeval']" >
						<td>{{section.name}}</td>
						<td>
						<input  type="number" 
								name="score"
								class="form-control"							
								ng-model="section.score" 			
								max=5
								min=1
								ng-focus />								
						</td>																		
						<td style="padding:0px; width: 200px;">&nbsp;						
							<button class="btn btn-primary" ng-click="saveEvalSection(section);"  title="Save"><i class="fa fa-save"></i></button>
							<button class="btn btn-danger" ng-click="removeEvaluationSection(section);"  title="Remove"><i class="fa fa-trash"></i></button>		
						</td>
					</tr>					
				</table>			
			</div>			
			
			<h3>Available Evaluation Sections</h3>
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('name', 'eval');">Section Name <span ng-show="predicate['eval'] === 'name'"><i ng-show="!reverse['eval']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['eval']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
					<th>Not Available</th>
					<th>Score</th>
					<th>Existing</th>
					<th>Action</th>
				</tr>
				<tr ng-repeat="section in sections | orderBy:predicate['eval']:reverse['eval']" >
					<td>{{section.name}}</td>					
					<td style="width: 100px;" align="center">
						<input type="checkbox" ng-model="section.notAvailable" />
					</td>
					<td style="width: 100px;">
					<input  type="text" 
							name="score"
							ng-disabled="section.notAvailable"
							class="form-control"							
							ng-model="section.actualScore" 
							onkeypress='return event.charCode >= 48 && event.charCode <= 57'
							ng-blur="checkEvalScore(section);"
							max=5
							min=1
							ng-focus />								
					</td>
					<td style="width: 75px;" align="center"><i class="fa" ng-class="section.activeStatus === 'A' ? 'fa-check' : ''"></td>
					<td style="padding:0px; width: 200px;">&nbsp;												
						<button class="btn btn-danger" ng-click="removeEvaluationSection(section);"  title="Remove"><i class="fa fa-trash"></i></button>		
					</td>
				</tr>					
			</table>
			<button class="btn btn-primary" ng-click="saveAllEvalSections();"  title="Save"><i class="fa fa-save"></i>&nbsp;Save All</button>
			
		</tab>		
		<tab heading="Reviews" ng-show="editMode">
			<hr>
			User Reviews<br><br>
			<loader trigger="reviewFormLoader"></loader>
			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadReviews()" style="width:110px;display: inline" ng-model="reviewFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
				<button class="btn btn-default" ng-click="loadReviews()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>				
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('title', 'review');">Title<span ng-show="predicate['review'] === 'title'"><i ng-show="!reverse['review']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['review']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
					<th>Rating</th>
					<th>Comment</th>
					<th>Pros</th>
					<th>Cons</th>					
					<th>User</th>
					<th>Update Date</th>
					<th>Action</th>
				</tr>
				<tr ng-repeat="review in reviews | orderBy:predicate['review']:reverse['review']" >
					<td>{{review.title}}</td>
					<td>{{review.rating}}</td>
					<td>{{review.comment | limitTo: 500}}</td>
					<td>
						<ul>
							<li ng-repeat="pro in review.pros">
								{{pro.text}}
							</li>
						</ul>
					</td>
					<td>
						<ul>
							<li ng-repeat="con in review.cons">
								{{con.text}}
							</li>
						</ul>
					</td>	
					<td>{{review.username}}</td>
					<td>{{review.updateDate | date:'MM/dd/yyyy h:mm:ss.sss a'}}</td>																
					<td style="padding:0px; width: 200px;">&nbsp;						
						<button class="btn" ng-click="toggleReviewStatus(review);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>						
					</td>
				</tr>					
			</table>				
		</tab>		
		<tab heading="Questions" ng-show="editMode">
			<hr>
			User questions and answers<br><br>
			<loader trigger="questionFormLoader"></loader>
			<div>	
				<br>
				Filter Status:
				<select type="text" class="form-control"  ng-change="loadQuestions()" style="width:110px;display: inline" ng-model="questionFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>			
				<button class="btn btn-default" ng-click="loadQuestions()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>				
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('question', 'question');">Question<span ng-show="predicate['question'] === 'question'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
					<th><a href="" ng-click="setPredicate('username', 'question');">Username<span ng-show="predicate['question'] === 'username'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
					<th><a href="" ng-click="setPredicate('userType', 'question');">User Type<span ng-show="predicate['question'] === 'userType'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
					<th><a href="" ng-click="setPredicate('organization', 'question');">Organization<span ng-show="predicate['question'] === 'organization'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
					<th><a href="" ng-click="setPredicate('updateDts', 'question');">Update Date<span ng-show="predicate['question'] === 'updateDts'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
					<th>Action</th>
				</tr>
				<tr ng-repeat-start="question in questions | orderBy:predicate['question']:reverse['question']">
					<td>{{question.question}}</td>
					<td>{{question.username}}</td>
					<td>{{question.userType}}</td>
					<td>{{question.organization}}</td>
					<td>{{question.questionUpdateDts | date:'MM/dd/yyyy h:mm:ss.sss a'}}</td>																
					<td style="padding:0px; width: 200px;">&nbsp;
						<button class="btn btn-default" ng-click="showQuestionResponses(question);"  title="ShowResponse">{{questionDetailsShow[question.questionId].showResponsesText}} Responses</button>	
						<button class="btn" ng-click="toggleQuestionStatus(question);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>						
					</td>
				</tr>
				<tr ng-show="questionDetailsShow[question.questionId].flag" ng-repeat-end>					
					<td colspan="6" style="padding: 10px">						
						<table class="table table-striped table-bordered">
							<tr>
								<th><a href="" ng-click="setPredicate('response', 'questionResponse');">Response<span ng-show="predicate['questionResponse'] === 'response'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>					
								<th><a href="" ng-click="setPredicate('username', 'questionResponse');">Username<span ng-show="predicate['questionResponse'] === 'username'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
								<th><a href="" ng-click="setPredicate('userType', 'questionResponse');">User Type<span ng-show="predicate['questionResponse'] === 'userType'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
								<th><a href="" ng-click="setPredicate('organization', 'questionResponse');">Organization<span ng-show="predicate['questionResponse'] === 'organization'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
								<th><a href="" ng-click="setPredicate('updateDts', 'questionResponse');">Update Date<span ng-show="predicate['questionResponse'] === 'updateDts'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
								<th><a href="" ng-click="setPredicate('activeStatus', 'questionResponse');">Active Status<span ng-show="predicate['questionResponse'] === 'activeStatus'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
								<th>Action</th>
							</tr>
							<tr ng-repeat="response in question.responses | orderBy:predicate['questionResponse']:reverse['questionResponse']">
								<td>{{response.response}}</td>
								<td>{{response.username}}</td>
								<td>{{response.userType}}</td>
								<td>{{response.organization}}</td>
								<td>{{response.updateDts | date:'MM/dd/yyyy h:mm:ss.sss a'}}</td>
								<td align="center">{{response.activeStatus}}</td>
								<td style="padding:0px; width: 200px;">&nbsp;									
									<button class="btn" ng-click="toggleQuestionResponseStatus(response, question);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>						
								</td>
							</tr>							
						</table>						
					</td>
				</tr>
			</table>	
		</tab>		
		<tab heading="Tags" ng-show="editMode">
			<hr>
			Component searchable labels.<br><br>
			<loader trigger="tagFormLoader"></loader>
			<div class="btn-warning formPanel-header" ng-click="tagForm.collapse = !tagForm.collapse;">
				Add Tag
				<span style="position: absolute; right: 0px; padding-right: 35px;">
					<i class="fa" ng-class="tagForm.collapse ? 'fa-toggle-down' : 'fa-toggle-up' "></i>						
				</span>
			</div>
			<div class="formPanel" collapse="tagForm.collapse">
				<form class="form-horizontal" name='tagUIForm' role="form"  ng-submit="saveTag()" style="padding-left: 10px; padding-right: 10px;">
					<div class="form-group"  >
						<label class=" control-label required">Tag</label>				
						<input  type="text" 								
								name="text"													
								class="form-control" 
								ng-model="tagForm.text" 
								ng-minlength=1
								ng-maxlength=250
								required 
								ng-focus />
						<p ng-show="tagUIForm.text.$error.minlength && !tagUIForm.text.$focused" class="help-block">Tag must be longer than 1 character in length.</p>
						<p ng-show="tagUIForm.text.$error.required && !tagUIForm.text.$focused" class="help-block">Tag is required.</p>
					</div>				
					<button type="submit" class="btn btn-primary" ng-disabled="tagUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;Add</button>						
				</form>			
			</div>	
			<div>	
				<br>
				<button class="btn btn-default" ng-click="loadTags()">Refresh&nbsp;<i class="fa fa-refresh"></i></button>				
			</div>	
			<table class="table table-striped table-bordered">
				<tr>
					<th><a href="" ng-click="setPredicate('text', 'tag');">Tag<span ng-show="predicate['tag'] === 'text'"><i ng-show="!reverse['tag']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['tag']" class="fa fa-sort-alpha-desc"></i></span></a></th>																															
					<th>Action</th>
				</tr>
				<tr ng-repeat="tag in tags | orderBy:predicate['tag']:reverse['tag']" >
					<td>{{tag.text}}</td>
					<td style="padding:0px; width: 200px;">&nbsp;						
						<button class="btn btn-danger" ng-click="removeTag(tag);"  title="Remove"><i class="fa fa-trash"></i></button>						
					</td>
				</tr>					
			</table>	
		</tab>		
	</tabset>
</div>	
<hr>
<br>
<br>
<div style="position: absolute; right: 0px; bottom: 15px; padding-right: 20px; ">
	<button type="submit" class="btn btn-primary" ng-click="close()"><i class="fa fa-close"></i>&nbsp;Close</button>	
</div>	