<div ng-controller="DetailsFulldetailsCtrl">

  <!-- This is the Title div with the tags, and needs to stay here -->
  <div id="updateNotify">
    <div>
      This component has recently been updated.
    </div>
  </div>
  <div class="component-details">
    <!-- TITLE SECTOIN -->
    <div class="container component-title">
      <div class="col-sm-12">
        <div style="display:inline-block; width: 100%">
          <h1>
            <div style="font-weight: 100; margin: 0px; padding: 0px; display: inline-block; float: left; margin-top: 10px;">{{details.details.name}}
              <span ng-if="details.details.organization" style="font-weight: bold; margin-top: -20px; padding-left:0px; display:block;">
                <br>
                Organization: {{details.details.organization}}
              </span>
              <span ng-if="details.details.version" style="font-weight: bold; margin-top: -40px; padding-left:0px; display:block;">
                <br>
                Version: {{details.details.version}}
              </span>
              <div>
                <div ng-repeat="attribute in details.details.attributes" style="display:inline-block;">
                  <img ng-show="attribute.badgeUrl" ng-src="{{attribute.badgeUrl}}" alt="Attribute Badge"  data-toggle="tooltip" data-placement="bottom" data-title="{{attribute.label}}" data-trigger="hover" style="margin-top:-10px; width: auto; height: 40px;">
                </div>
              </div>
            </div>
            <div class="pull-right" id="detailsToolButtons">
              <button ng-init="tagsOn = false" class='btn btn-info detailsTitleButton' id="data-collapse-tags" ng-click="toggleTags('#tagsUpdate');"  data-toggle="tooltip" data-placement="bottom" data-title="View/Edit Tags" data-trigger="hover" style="position:relative;">
                <i class="fa fa-tags imitateLink"></i>
                <i ng-show="!tagsOn"class="fa fa-toggle-off" style="position: absolute; left: 19px; font-size: xx-small; top: 37px;"></i>
                <i ng-show="tagsOn"class="fa fa-toggle-on" style="position: absolute; left: 19px; font-size: xx-small; top: 37px; color: #FF811A;"></i>
              </button>
              <button class='btn btn-info detailsTitleButton' ng-show="!details.details.watched" ng-click="addToWatches(details.details.componentId)" data-toggle="tooltip" data-placement="bottom" data-title="Add Component to Watches" data-trigger="hover"><i class="ic ic-binoculars imitateLink"></i>
              </button>
              <button class='btn btn-info detailsTitleButton' ng-show="details.details.watched" ng-click="openModal('profileModal', 'Watches')" data-toggle="tooltip" data-placement="bottom" data-title="View Watches" data-trigger="hover"><i class="fa fa-eye imitateLink"></i>
              </button>
              <button class='btn btn-info detailsTitleButton' ng-show="details.details.watched" ng-click="removeFromWatches(details.details.componentId)" data-toggle="tooltip" data-placement="bottom" data-title="Remove From Watches" data-trigger="hover"><i class="ic ic-binoculars imitateLink"></i><i class="ic ic-blocked imitateLink" style="font-size: 44px; position: absolute; margin-left: -35px; margin-top: -9px; color: rgba(139, 139, 139, 0.72);"></i>
              </button>
              <button class='btn btn-info detailsTitleButton' id="printLink" ng-click="goToPrint('/print', {'type':'component', 'id': details.details.componentId})" data-toggle="tooltip" data-placement="bottom" data-title="Go to Print View" data-trigger="hover">
                <i class="fa fa-print imitateLink"></i>
              </button>
              <button ng-show="!single" class='btn btn-info detailsTitleButton' id="permenantLink" ng-click="goToFullPage(details.details.componentId)" data-toggle="tooltip" data-placement="bottom" data-title="Go to Full Page" data-trigger="hover">
                <i class="fa fa-copy imitateLink"></i>
              </button>
              <button ng-show="single" class='btn btn-info detailsTitleButton' id="permenantLink" ng-click="goTo('/', {})" data-toggle="tooltip" data-placement="bottom" data-title="Go to Home Page" data-trigger="hover">
                <i class="ic ic-home2 imitateLink"></i>
              </button>
            </div>
          </h1>
        </div>
        <!-- injected evaluations start -->

        <!-- injected evaluations start -->
        <div style="padding: 0px 10px;" id="tagsUpdate" class="panel-collapse collapse">
          <div class="bootstrap">
            <div class="tags" style="width: 100%; border: 0px; box-shadow: none; display:block;">
              <ul class="tags-list" style="margin: 0; padding: 0; list-style-type: none;">
                <li class="tag-item ng-scope" ng-repeat="tag in details.details.tags" style="margin: 2px; padding: 0 5px; display: inline-block; font: 14px 'Helvetica Neue',Helvetica,Arial,sans-serif; height: 26px; line-height: 25px;">
                  <span ng-bind="tag.text"></span>
                  <a ng-if="(user && tag.createUser && user.info.username === tag.createUser) || !tag.createUser || user.info.admin" class="remove-button" ng-click="removeTag(details.details.componentId, tag, details.details.tags)" style="margin: 0 0 0 5px; padding: 0; border: 0; background: 0 0; cursor: pointer; vertical-align: middle; font: 700 16px Arial,sans-serif; color: #585858;">&times;</a>
                </li>
              </ul>
            </div>
          </div>
          <tags-input class="bootstrap" min-length="1" ng-model="tempTags" replace-spaces-with-dashes="false" on-tag-added="addTag(details.details.componentId, $tag, details.details.tags);"><auto-complete min-length="1" source="checkTagsList($query, details.details.tags, tagsList)"></auto-complete></tags-input>
        </div>
      </div>
    </div>
    <!-- END TITLE SECTION -->



    <div class="leftCol hideTheExtra" style="background:white; margin-top:-10px; padding:0px 15px 0px 40px;">
      <div ng-if="details.details.evaluation.startDate !== null" class="rightCol">
        <table class="table table-bordered table-hover" style="table-layout: fixed;"  id="evaluationSectionsUpdate">
          <tbody ng-if="details.details.evaluation && details.details.evaluation.evaluationSections && details.details.evaluation.evaluationSections.length">
            <!-- Currently this table only shows if there is a start date -->
            <tr>
              <th ng-if="details.details.evaluation.evaluationSections.length" class="valign" colspan="2"><h4>Reusability Factors (5=best)</h4></th>
              <th ng-if="!details.details.evaluation.evaluationSections.length" class="valign" colspan="2"><h4>Component Evaluation Information</h4></th>
            </tr>
            <tr ng-if="details.details.evaluation.endDate">
              <th class="valign" style="vertical-align:middle"><h5>Evaluation Date</h5></th>
              <th class="valign"><h5>{{getDate(details.details.evaluation.endDate)}}</h5></th>
            </tr>
            <tr data-ng-repeat="row in details.details.evaluation.evaluationSections | partition:2">
              <td data-ng-repeat="col in row" class="valign" style="padding: 0px;">
                <div class="overflow-pair-right" style="vertical-align:middle; padding: 8px; border-left: 1px solid lightgray; margin-left: -1px; width:77px; float: right;" data-toggle="tooltip" data-placement="bottom" data-title="{{col.actualScore}}" data-trigger="hover">
                  <i ng-if="!col.notAvailable && col.actualScore > 0" ng-repeat="t in getTimes(col.actualScore) track by $index" class="fa fa-circle" style="color:#021233; display:inline-block">
                  </i>
                  <span ng-if="!col.notAvailable && col.actualScore <= 0">&nbsp;</span>
                  <span ng-if="col.notAvailable" ><b>N/A</b></span>
                </div>
                <div  ng-class="getIsUpdated('evaluationSections')? 'updatedForUser': ''" class="overflow-pair-left imitateLink" style="vertical-align:middle; padding: 8px;  border-right: 1px solid lightgray;" popover data-trigger="hover" data-placement="left" data-html="true"  data-original-title="<b>{{col.name}}</b> ranking = {{col.score}}" data-container="body" data-content="<b>Section Description:</br></b>{{getEvalDescription(col)}}" >
                  <a href="javascript:void(0)" class="helpcontent" > {{col.name}} </a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="updatedStuff">
        <div class="section-headers"><h4>Component Description</h4></div>
        <p class="results-content-description" ng-class="getIsUpdated('description')? 'updatedForUser': ''" style="margin-left: 0px;" ng-bind-html="details.details.description">
        </p>
        <br>
      </div>
      <div ng-if="details.details.componentMedia[0]" class="leftCol hideTheExtra" id="mediaUpdate">
        <div class="section-headers"><h4>Screenshots / Media</h4></div>
        <br>
        <div class="containers" ng-class="getIsUpdated('media')? 'updatedForUser': ''" >
          <ul style="list-style-type: none;">
            <li ng-repeat="image in getImages(details.details.componentMedia) | limitTo:3" style="display:inline; padding:5px 10px 10px 0;" style="display:inline">
              <a ng-click="openLightboxModal($index, details.details.componentMedia)" style="text-decoration:none; cursor:pointer; width: 100px; height: 100px; overflow: hidden;">
                <img ng-src="{{image.link}}" class="img-thumbnail" alt="description" title="description goes here" style="width: 100px; height: auto;">
              </a>
            </li>
            <li ng-if="images.length > 3" style="display:inline">
              <button class="btn btn-default" ng-click="openLightboxModal(3, details.details.componentMedia)">View More</button>
            </li>
          </ul>
        </div>
      </div>

      <div ng-if="evaluationAttributes.exist" class="row">
        <div class="col-md-12">
          <div class="section-headers addBorders"><h4>DI2E Evaluation Level</h4></div>
          <table class="table table-bordered table-hover" >
            <tr ng-if="evaluationAttributes.level">
              <th colspan="2" style="vertical-align: middle  text-overflow: ellipsis; overflow: hidden;">
                {{evaluationAttributes.level.typeDescription}}
              </th>
              <td colspan="8" class="{{evaluationAttributes.level.highlightStyle}}" >
                <h4>{{evaluationAttributes.level.codeDescription}}</h4>
                <span dynamichtml="evaluationAttributes.level.codeLongDescription"></span>
              </td>     
            </tr>
            <tr ng-if="evaluationAttributes.state">
              <th colspan="2" style="vertical-align: middle  text-overflow: ellipsis; overflow: hidden;">
                {{evaluationAttributes.state.typeDescription}}
              </th>
              <td  colspan="8" class="{{evaluationAttributes.state.highlightStyle}}" >
                <h4>{{evaluationAttributes.state.codeDescription}}</h4>
                <span dynamichtml="evaluationAttributes.state.codeLongDescription"></span>
              </td>     
            </tr>
            <tr ng-if="evaluationAttributes.intent">
              <th colspan="2" style="vertical-align: middle  text-overflow: ellipsis; overflow: hidden;">
                {{evaluationAttributes.intent.typeDescription}}
              </th>
              <td  colspan="8" class="{{evaluationAttributes.intent.highlightStyle}}" >
                <h4>{{evaluationAttributes.intent.codeDescription}}</h4>
                <span dynamichtml="evaluationAttributes.intent.codeLongDescription"></span>
              </td>     
            </tr>   
          </table>  
        </div>
      </div>




    </div>




    <!-- Tabbing for Results Page -->
    <div class="col-md-12" style="background:white; margin-top: -11px;" id="detailsTabs">
      <tabset justified="true" type="">  <!-- pills -->
        <tab ng-repeat="tab in detailResultsTabs" ng-click="sendPageView(details.details.name+'-'+tab.title); changeTab(tab)" heading="{{tab.title}}" class="{{tab.class}}" id="{{tab.id}}">
          <div ng-include="tab.relpath"></div>
          <br>
        </tab>
      </tabset>
    </div>


  </div>

  <!-- Modal legend for evaluation levels progress bar colors -->
  <div class="modal fade" id="basicModal2" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="glyphicon glyphicon-remove"></i></button>
          <h4 class="modal-title" id="di2eEvaluationScheduleDetails">DI2E Evaluation Schedule Details</h4>
        </div>
        <div class="modal-body">
          <div class="col-sm-12"> 
            <p><b>Progress bar color scheme and date indicators</b>
              <br>The progress bar color scheme indicates current activity within any phase of the Evaluation Schedule. Also, there are
              ending date indicators ( <b>mm/dd</b> ) below at the right edge of each bar, to indicate the completion date (either actual or estimated).
            </p>
          </div>  
          <div class="col-md-12" style="padding:0;">
            <div class="col-md-3" style="background-color:#E6E8EB;border:1px solid navy; height:50px; text-align:center; vertical-align:middle">Completed</div>

            <div class="col-md-3" style="background-color:#ffffff;border-right:1px dashed #5cb85c;border-top:1px dashed #5cb85c;border-bottom:1px dashed #5cb85c; height:50px;text-align:center; color:#4E9C4E">In Progress</div>

            <div class="col-md-3" style="background-color:#FF811A;border-right:1px solid navy;border-top:1px solid navy;border-bottom:1px solid navy; height:50px;text-align:center; color:white">Halted</div>

            <div class="col-md-3" style="background-color:#ffffff ;border-right:1px solid gray;border-top:1px solid gray;border-bottom:1px solid gray; height:50px;text-align:center; color:#808080 ">Not Started</div>
          </div>
          <br><br><br>
          <p class="">
            <br><br><b>Level 0 – Available for Reuse/Not Evaluated</b>
            <br>
            <ul>
              <li>Asset is added to the Clearinghouse Site for reuse or consumption. Asset has not been evaluated for Enterprise readiness or Conformance. </li>
              <li>Asset will enter DI2E Clearinghouse Process to be assessed for potential reuse.</li>
              <li>Asset has completed the Component Prep and Analysis phase.</li>
            </ul>
            <br><b>Level 1 – Initial Reuse Analysis</b>
            <br>
            <ul>
              <li>Inspection portion of DI2E Framework Evaluation Checklist complete.  </li>
              <li>These questions focus mainly on the reuse potential (Visible, Accessible, and Understandable) by analysis of the information provided.
              </li>
              <li>This level does not represent the pass or fail, the Consumer must read the Evaluation Report. </li>
            </ul>
            <br><b>Level 2 – Integration and Test</b>
            <br>
            <ul>
              <li>Integration and Test portion of the DI2E Framework Evaluation Checklist complete.</li>
              <li>These questions focus on the interoperability and ease of reuse, and will normally include an I&amp;T plan.</li>
              <li>This level does not indicate a pass or fail of the conformance test.</li>
              <li>Consumer will read the Test Report linked in the Clearinghouse Site entry for program functionality.</li>
            </ul>
            <br><b>Level 3 – DI2E Framework Reference Implementation</b>
            <br>
            <ul>
              <li>Asset has been determined to be reusable and interoperable, appropriately documented, and conformant to applicable DI2E Framework specifications and standards and is integrated into the DI2E Reference Ecosystem.</li>
            </ul>
            <br><b>NA – No Evaluation Planned</b>
            <br>
            <ul>
              <li>Planned Evaluation does not apply to DI2E Priorities, Focus Areas, Reference Architecture, Clearinghouse Site (e.g. Guidebooks, reusable Contract Language, Lessons Learned, etc.).</li>
              <li>N/A indicates no evaluation is expected.</li>
            </ul>
          </p>
        </div>
      </div>
    </div>
  </div>
